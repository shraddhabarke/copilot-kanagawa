template <typename T, auto N>
inline optional<T> last_valid(vector<optional<T>, N> v)
{
    return reduce(selecting(on2nd(not(Opt::is_valid<T>))), v);
}