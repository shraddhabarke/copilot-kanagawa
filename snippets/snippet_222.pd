template <typename T>
struct ecc
{
    //| True when an ECC error was detected, regardless of whether it was
    // corrected or not.
    bool error;
    //| Value read from the memory, valid if there was no ECC error, or an
    // error was corrected.
    optional<T> data;
}
template <typename T>
inline ecc<T> make_ecc(bool error, bool valid, T value)
{
    return {error, make_optional(valid, value)};
}